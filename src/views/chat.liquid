{% layout "src/views/layouts/base.liquid" %}
{% block head %}
  <link rel="stylesheet" href="/styles/message.css">
{% endblock %}
{% block contentHeader %}
<header>
  <a href="../">Back</a>
  <p>{{ currentUser.name }}</p>
  <img src="" alt="profile photo">
</header>
{% endblock %}
{% block contentMain %}
<main>
  {% if showNotification %}
    {% render '../components/noti.liquid' %}
  {% endif %}
  {% comment %} <h1>Send a message to {{ contact.name  }}</h1> {% endcomment %}
  <div class="chat-box">
    <form action="/addMessageWithRefresh" method="post" class="textForm">
      <input type="text" name="text" id="textInput" placeholder="Enter text">
      <input type="hidden" name="messageId" value="0" >
      <input type="hidden" name="icon" value="/icon/iconportfoliozwart.png">
      <input type="hidden" name="chatId" value="{{ chatId }}">
      <input type="hidden" name="userId" value="{{ currentUser.id }}">
      <button type="submit">Send Text</button>
    </form>
    <section class="message-box">
      <h2 class="visually-hidden">All the messages of the chat are shown here:</h2>
      {% for chat in chats %}
        <p class="{{ chat.direction }}">Message from {{ chat.fact.from }}: {{ chat.fact.text }}</p>
      {% endfor %}
    </section>
  </div>
  <ul class="chats">
    {% for chat in user.chats %}
      <li>Chat with: <a href="/account/{{ user.id }}/chat/{{ chat.id }}"> {{ chat.name }}</a></li>
    {% endfor %} 
  </ul>
</main>
<script src="/js/extraFunctions.js"></script>
<script src="/js/addMessage.js"></script>
<script src="/js/sw.js"></script>
{% endblock %}
